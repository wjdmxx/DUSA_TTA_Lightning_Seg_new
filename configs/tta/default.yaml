# TTA Configuration

# Forward mode
# - "tta": Full TTA with generative model
# - "discriminative_only": Only run discriminative model (baseline)
forward_mode: tta
# forward_mode: discriminative_only

# Continual mode
# - true: Don't reset model between corruptions (continual adaptation)
# - false: Reset model before each corruption (independent adaptation)
continual: false

# Batch size (1 recommended for TTA)
batch_size: 1

# Gradient accumulation steps
# - Accumulate gradients over this many steps before updating
# - Effective batch size = batch_size * accumulation_steps
# - Set to 1 to disable accumulation
accumulation_steps: 1

# Whether to update generative model
update_generative: true

# Optimizer configuration
optimizer:
  type: AdamW
  lr: 1e-5                    # Global default learning rate (fallback)
  lr_discriminative: 1e-5     # Learning rate for discriminative model (optional, falls back to lr)
  lr_generative: 5e-6         # Learning rate for generative model (optional, falls back to lr)
  betas: [0.9, 0.999]
  weight_decay: 0.0

# DataLoader configuration
dataloader:
  num_workers: 4
  shuffle: true
  pin_memory: true
